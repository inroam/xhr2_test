webpackJsonp([1,0],[function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=o(100),i=s(n),a=o(99),r=s(a),l=o(29),c=s(l),u=o(90),d=s(u);i["default"].use(r["default"]);var p=new r["default"];(0,c["default"])(p);var f={components:{App:d["default"]}};p.start(f,"body")},,function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(73),i=s(n),a={msgObj:document.getElementsByClassName("body-wrapper")[0],username:null,userid:null,color:null,socket:null,onlineCount:0,onlineUsers:null,msgArr:[],scrollToBottom:function(){},logout:function(){this.socket.disconnect()},submit:function(e){if(""!=e){var t={userid:this.userid,username:this.username,msg:e,color:this.color};this.socket.emit("message",t)}else console.log("msg is null");return!1},genUid:function(){return(new Date).getTime()+""+Math.floor(899*Math.random()+100)},updateSysMsg:function(e,t){this.onlineUsers=e.onlineUsers,this.onlineCount=e.onlineCount;e.user},changeInfo:function(){this.userid=localStorage.getItem("userid"),this.username=localStorage.getItem("name"),this.color=localStorage.getItem("color"),this.weichat=localStorage.getItem("weichat"),this.socket.emit("changeInfo",{userid:this.userid,username:this.username,color:this.color,weichat:this.weichat})},init:function(){var e=this;this.userid=localStorage.getItem("userid"),this.username=localStorage.getItem("name"),this.color=localStorage.getItem("color"),this.weichat=localStorage.getItem("weichat"),this.userid&&(this.socket=i["default"].connect("wss://node.redream.cn"),this.socket.emit("login",{userid:this.userid,username:this.username,color:this.color,weichat:this.weichat}),setInterval(function(){e.socket.emit("heartbeat",1)},1e4),this.socket.on("login",function(e){a.updateSysMsg(e,"logout"),a.msgArr.push(e)}),this.socket.on("changeInfo",function(e){a.onlineUsers[e.userid]=e,console.log(e)}),this.socket.on("logout",function(e){a.updateSysMsg(e,"logout")}),this.socket.on("message",function(e){a.msgArr.push(e)}))}};t["default"]=a},,,,,,,,function(e,t){"use strict";function o(){return"#"+(~~(Math.random()*(1<<24))).toString(16)}function s(){return(new Date).getTime()+""+Math.floor(899*Math.random()+100)}Object.defineProperty(t,"__esModule",{value:!0}),t.randomColor=o,t.genUid=s},,,,,,,,,,,,function(e,t,o){var s,n;o(58),s=o(34),n=o(82),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(64),s=o(40),n=o(88),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(65),s=o(41),n=o(89),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},,,,,function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){e.map({"/groupinfo":{name:"groupinfo",component:i["default"]},"/login":{name:"login",component:r["default"]}})};var n=o(22),i=s(n),a=o(23),r=s(a)},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(93),i=s(n),a=o(91),r=s(a),l=o(92),c=s(l),u=o(22),d=s(u);t["default"]={components:{ChatHead:i["default"],ChatBody:r["default"],ChatFoot:c["default"],GroupInfo:d["default"]}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(96),i=s(n),a=o(97),r=s(a),l=o(98),c=s(l),u=o(2),d=s(u);t["default"]={data:function(){return{CHAT:d["default"]}},ready:function(){localStorage.getItem("name")||this.$router.go("/login")},components:{OtherMsg:i["default"],SelfMsg:r["default"],SystemMsg:c["default"]},methods:{visit:function(){var e=new XMLHttpRequest;e.open("POST","http://item.redream.cn/statistics/chat/chat_visit.php"),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status}}}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),i=s(n);t["default"]={data:function(){return{msg:""}},ready:function(){i["default"].init(),console.log(i["default"],"ww")},methods:{send:function(e){i["default"].submit(e),this.msg="",console.log(i["default"])}}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(23),i=s(n),a=o(2),r=s(a);t["default"]={data:function(){return{msg:"",CHAT:r["default"]}},ready:function(){console.log(11,r["default"].onlineCount)},components:{Login:i["default"]}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(95),i=s(n),a=o(94),r=s(a);t["default"]={data:function(){return{}},ready:function(){console.log(77)},components:{GroupInfoHead:i["default"],GroupInfoBody:r["default"]}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),i=s(n),a=o(24),r=s(a),l=o(10);t["default"]={data:function(){return{CHAT:i["default"],color:localStorage.getItem("color")||"#666",name:"redream",weichat:"redream",isShow:!1,fname:"redream",fweichat:"redream",isShowF:!1}},ready:function(){return console.log(i["default"].onlineUsers,99),localStorage?(localStorage.getItem("name")&&(this.name=localStorage.getItem("name")),localStorage.getItem("color")&&(this.color=localStorage.getItem("color")),void(localStorage.getItem("weichat")&&(this.weichat=localStorage.getItem("weichat")))):void alert("不支持本地保存")},components:{dialog:r["default"]},methods:{changeColor:function(){this.color=(0,l.randomColor)(),localStorage.setItem("color",this.color)},save:function(){this.name=this.name.slice(0,10),localStorage&&(localStorage.setItem("name",this.name),localStorage.setItem("color",this.color),localStorage.setItem("weichat",this.weichat)),this.isShow=!1,this.CHAT.changeInfo()},show:function(){this.isShow=!0},del:function(){localStorage&&(localStorage.removeItem("name"),localStorage.removeItem("userid"),localStorage.removeItem("color"),localStorage.removeItem("weichat")),this.CHAT.logout(),this.$router.go("/login")},showWeiChat:function(e){console.log(e),this.fname=e.username,this.fweichat=e.weichat,this.isShowF=!0},closeF:function(){this.isShowF=!1}}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),i=s(n),a=o(24),r=s(a);t["default"]={data:function(){return{CHAT:i["default"],isShare:!1}},ready:function(){},components:{dialog:r["default"]},methods:{open:function(){this.isShare=!0},close:function(){this.isShare=!1}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{}},ready:function(){this.$el.scrollIntoView()},props:["msg","name","color"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{}},ready:function(){this.$el.scrollIntoView()},props:["msg","color"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{}},props:["msg"]}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),i=s(n),a=o(10);t["default"]={data:function(){return{name:"",color:"",weichat:""}},ready:function(){},methods:{send:function(e){i["default"].submit(e),this.msg="",console.log(i["default"])},login:function(){return this.name.trim()?(this.name=this.name.slice(0,10),localStorage&&(localStorage.setItem("name",this.name),localStorage.setItem("color",(0,a.randomColor)()),localStorage.setItem("weichat",this.weichat),localStorage.setItem("userid",(0,a.genUid)())),i["default"].init(this.name),void this.$router.go("/")):void alert("昵称不能为空！")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{}},ready:function(){},components:{},props:{fastClose:{type:Boolean,"default":!1}},methods:{close:function(){this.fastClose&&this.$router.go(-1)}}}},,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,function(e,t){e.exports=" <div class=chat> <chat-head></chat-head> <chat-body></chat-body> <chat-foot></chat-foot> </div> "},function(e,t){e.exports=' <div class=body-wrapper> <template v-for="msgObj in CHAT.msgArr"> <template v-if=msgObj.login> <system-msg :msg=msgObj.user.username></system-msg> </template> <template v-if=!msgObj.login&&!msgObj.logout> <other-msg v-if="msgObj.userid!=CHAT.userid" :name=msgObj.username :msg=msgObj.msg :color=msgObj.color></other-msg> <self-msg v-if="msgObj.userid==CHAT.userid" :msg=msgObj.msg :color=msgObj.color></self-msg> </template> </template> </div> '},function(e,t){e.exports=' <div class=foot-wrapper> <input class=chat-input type=text name="" v-model=msg> <span class=chat-sub :class="{\'primary\':!!msg}" @click=send(msg)>发送</span> </div> '},function(e,t){e.exports=' <div class=head-wrapper> <div class=-left> <a href="http://mp.weixin.qq.com/s?__biz=MzAwMjAzNDU1NQ==&mid=401448725&idx=1&sn=2247d58a5c75e237b0d5f9f14ff42e56#rd"> <i class="iconfont icon-keaide"></i> </a> <a href=http://www.redream.cn/main/treehole.php> <i class="iconfont icon-tree"></i> </a> </div> <div class=-mid> <p class=group-name>江湖人的江湖({{CHAT.onlineCount}})</p> </div> <div class=-right v-link="\'/groupinfo\'"> <i class="iconfont icon-group"></i> </div> </div> '},function(e,t){e.exports=" <div class=group-info-wrap transition=slide> <group-info-head></group-info-head> <group-info-body></group-info-body> </div> "},function(e,t){e.exports=' <div class=group-info-body-wrap> <div class=-bar></div> <div class=-members> <div class=-member v-for="userObj in CHAT.onlineUsers" @click=showWeiChat(userObj)> <span class=-header :style="{\'background-color\':userObj.color}"> {{userObj.username.slice(-1)}} </span> <span class=-name> {{userObj.username.slice(0,4)}} </span> </div> <div class=-member v-for="i in 9"> </div> </div> <div class=-bar></div> <div class=-self> <div class=-title> 我在本群的信息 </div> <div class=-info> <span class=-header :style="{\'background-color\':color}"></span> <span class=-name>{{name}}</span> <span class=-modify @click=show()>修改</span> </div> <div class=-notice> <span> 点击头像可获取成员微信号。关注公众号<a href="http://mp.weixin.qq.com/s?__biz=MzAwMjAzNDU1NQ==&mid=401448725&idx=1&sn=2247d58a5c75e237b0d5f9f14ff42e56#rd">redream</a>回复“聊天”进入。@<a href=https://github.com/secreter/websocket_chat>github</a> </span> </div> </div> <div class=-bar></div> <div class=-del @click=del()>删除并退出</div> <div class=-bar></div> <div class=-bar></div> </div> <dialog v-if=isShow :fast-close=false> <div class=modify-box> <div class=-header @click=changeColor()> <span class=-img :style="{\'background-color\':color}"></span> <span class=-notice>点击更换颜色</span> </div> <div class=-name> <label>群昵称：</label> <input type=text v-model=name placeholder=10字以内> </div> <div class=-weichat> <label>微信号：</label> <input type=text v-model=weichat placeholder=方便私聊（选填）> </div> <div class=-save> <span class=-btn @click=save()>保存</span> </div> </div> </dialog> <dialog v-if=isShowF> <div class=f-info> <div class=-name> <label>群昵称：</label> <input disabled=true type=text v-model=fname placeholder=""> </div> <div class=-weichat> <label>微信号：</label> <input disabled=true type=text v-model=fweichat placeholder=不告诉你，群里自己要> </div> <div class=-save> <span class=-btn @click=closeF()>关闭</span> </div> </div> </dialog> '},function(e,t){e.exports=' <div class=group-info-head-wrap> <div class=-left v-link="\'/\'"> <i class="iconfont icon-back"></i> </div> <div class=-mid> <p class=group-name>江湖人的江湖({{CHAT.onlineCount}})</p> </div> <div class=-right @click=open()> <i class="iconfont icon-share"></i> </div> </div> <dialog v-if=isShare @click=close()> <div class=share>点击右上角分享</div> </dialog> '},function(e,t){e.exports=" <div class=other-wrap> <span class=-header :style=\"{'background-color':color}\">{{name.slice(-1)}}</span> <span class=-name>{{name}}</span> <div class=-msg>{{msg}}</div> </div> "},function(e,t){e.exports=" <div class=self-wrap> <span class=-header :style=\"{'background-color':color}\">我</span> <div class=-msg>{{msg}}</div> </div> "},function(e,t){e.exports=" <div class=sys-wrap> <div class=sys-msg> {{msg}} 加入群聊 </div> </div> "},function(e,t){e.exports=" <div class=login-wrapper transition=loginslide> <div class=header> </div> <div class=body> <div class=-title> 江湖人的江湖 </div> <div class=-name> <label>群昵称：</label> <input type=text v-model=name placeholder=10字以内> </div> <div class=-weichat> <label>微信号：</label> <input type=text v-model=weichat placeholder=方便私聊（选填）> </div> <div class=-login> <span class=-btn @click=login()>登录</span> </div> </div> <div class=foot> <span>@<a href=http://www.redream.cn>redream</a>,你说，远方有什么？</span> <span>(没钱验证微信号，在浏览器打开可消除微信安全提示)</span> </div> </div> "},function(e,t){e.exports=" <div class=dialog-mask transition=enter @click=close> <div class=dialg-wrap> <slot></slot> </div> </div> "},function(e,t,o){var s,n;o(66),s=o(30),n=o(78),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(55),s=o(31),n=o(79),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(56),s=o(32),n=o(80),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(57),s=o(33),n=o(81),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(59),s=o(35),n=o(83),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(60),s=o(36),n=o(84),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(61),s=o(37),n=o(85),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(62),s=o(38),n=o(86),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},function(e,t,o){var s,n;o(63),s=o(39),n=o(87),e.exports=s||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},,,,function(e,t){}]);
//# sourceMappingURL=app.3d7c24e65759c049e016.js.map